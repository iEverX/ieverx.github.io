+++
title = "《设计数据密集型应用》读完啦"
date = 2019-06-26T23:50:00+08:00

[taxonomies]
tags = ["读书", "分布式"]
+++

Disign Data-Intensive Application，大名鼎鼎的 DDIA，中文名就是设计数据密集型应用。这本书我买的时间是去年的6月18号，大约一个多星期之前，终于是读完啦，算是整整一年吧。买的是影印版，英文，应该是第一次读完一整本的比较厚的英文技术书籍。

读书的进度也比较奇怪，在去年9月份左右，前两个部分就读完了，当时一直有一种就是想读的感觉。之后又突然懈怠了，停滞了许久。知道今年上半年陆续读了一些，终于在最近达成目标。

做服务端开发，如果想要深入，有些技术就必然绕不过去，就比如本书所涉及的数据存储、数据处理以及分布式系统。之前也想深入了解一下分布式系统，看了些相关文章、博客，但是并没有系统的学习，因此理解层次比较浅，缺乏全局的认识，也容易看过就丢。而这本书，虽然并不是着眼于分布式系统，却从数据的角度，讲了分布式系统涉及的概念和理论。

本书从应用的可靠性、扩展性、可维护性开始，到大数据应用的伦理结束，分为三个部分共十二章。

# Part 1. Foundations of Data System

第一个部分是数据系统的基础，包括 4 章，分别是关于数据系统的数据定义以及关注点、数据模型、存储引擎、序列化。

## 数据系统的三大问题

一个典型的数据系统（Data System）可以由几个基本块构成，

* 存储数据，因而之后自己或者其他应用可以找到这些数据（数据库）
* 记住高代价操作的结果，从而可以加速读取（缓存）
* 允许用户通过关键字搜索，或者其他方式过滤数据（索引）
* 向其他应用发消息，从而异步处理（流处理）
* 定期处理大量数据（批处理）

而数据数据系统最关注的三个问题，则是

* Reliablity，可靠性：即使在故障（adversity）情况（软硬件故障）甚至人为失误的情况下，系统依然能正确地（correctly） 工作（在期望的性能下，正确的执行功能）
* Scalabiity，扩展性：在系统逐渐庞大（grows)（数据量、流量或者复杂性）的过程中，有合理的方式解决这个过程中出现的问题
* Maintainability，可维护性：系统的生命周期中，对系统的修改，包括维护当前功能或者增加新功能，都可以高效地（）productively）完成。

## 数据的存储、获取、传输

### 数据模型

数据模型不仅仅关系到一个应用如何实现，还表明了我们对问题的思考方式。通常，数据模型都是一层叠一层，上层的数据模型依赖于下一层的数据模型。比如，

* 通常会有应用模型，使用接口和类表示，用于描述领域问题
* 这些模型在存储时，可能是 json 或者关系型数据库表、图数据库的图等
* 底层的存储引擎，则会把这些数据转变为 bytes
* 在更底层还涉及硬件

在第二章，主要涉及的是其中的第二项。

目前，关系模型是使用最广泛的数据模型。然而，关系模型不能和领域级别的抽象一一对应。通常，领域模型使用对象进行描述，而对象和关系模型的表、行、列，并不是一一对应的。对象之间的关联关系，映射到关系模型，就会产生不同的关系，如一对一、多对一、多对多等。这种映射并不直观。很久之前就出现过其他的数据模型，比如网络模型（network model），每个记录之间存在链接，表示相互关系。但是网络模型的查询太复杂，所以败给了关系模型。文档模型又是另外的一种，和网络模型有些类似，都会把嵌套的记录放到父记录中而不是另起一张表，不过文档记录在处理前文的多对一、多对多关系时，存储的 document reference 更像是外键。

文档模型和关系模型的一大区别在于，关系模型的模式（schema）是确定的，而文档模型的 schema 则更灵活，有时被称为 schemaless。实际上，文档模型只是在写入是不强制必须是统一的 schema，在读数据时，会认为数据具有某种特定的结构。与编程语言里的鸭子类型相似。这种模式，称为 schema-on-read，而传统的关系数据库，则时 schmea-on-write。

数据存储在硬盘上，目的是为了日后可以读。而根据不同的应用场景，可能需要数据的不同部分。这就涉及了数据的查询。





